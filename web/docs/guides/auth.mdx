---
id: auth
title: 認証
description: Use Supabase to Authenticate and Authorize your users.
---

import Link from '@docusaurus/Link'
import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import providers from '@site/src/data/authProviders'

<iframe
  className="w-full video-with-border"
  width="640"
  height="480"
  src="https://www.youtube-nocookie.com/embed/6ow_jW4epf8"
  frameBorder="1"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>

<<<<<<< HEAD
## ユーザー管理

Supabaseでは、ユーザーの管理を簡単に行うことができます。
=======
## Overview

There are two parts to every Auth system:
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9

- **Authentication:** should this person be allowed in? If yes, who are they?
- **Authorization:** once they are in, what are they allowed to do?

<<<<<<< HEAD
ユーザーがサインアップすると、SupabaseはユーザーにユニークなIDを割り当てます。このIDはデータベース内のどこでも参照できます。例えば、`user_id`フィールドを使って、`auth.users`テーブルの`id`を参照する`profiles`テーブルを作成できます。

Supabaseは、アプリやWebサイトのユーザーを[サインアップ](/docs/reference/javascript/auth-signup)、[ログイン](/docs/reference/javascript/auth-signin)、[ログアウト](/docs/reference/javascript/auth-signout)し、管理するための手段を提供します。

## サードパーティーのログイン

現在、以下のOAuthプロバイダをサポートしています。
=======
Supabase Auth is designed to work either as a standalone product, or deeply integrated with the other Supabase products. 
Postgres is at the heart of everything we do, and the Auth system follows this principle. We leverage Postgres' build-in Auth functionality wherever possible.

## Authentication

You can authenticate your users in several ways:

- Email & password.
- Magic links (one-click logins).
- Social providers.
- Phone logins.
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9

### Providers 

We provide a suite of Providers and login methods.

<div class="container" style={{ padding: 0 }}>
  <div class="row is-multiline">
    {providers.map((x) => (
      <div key={x.name} class="col col--6">
        <Link class="card" to={x.href}>
          <div class="card__body">
            <div class="" style={{ display: 'flex', justifyContent: 'space-between', gap: 10 }}>
              {x.logo && <img src={x.logo} alt={x.name} width="20" />}
              <p>{x.name}</p>
              <p>
                {x.official ? <span class={`badge badge--official`}>
                  Official
                </span>: 
                <span class={`badge badge--unofficial`}>
                  Unofficial
                </span>
                }
              </p>
            </div>
            <div style={{ display: 'flex', flexDirection: 'column', gap: 5 }}>
              <div class="code-block" style={{ width: '100%',  display: 'flex', justifyContent: 'space-between', fontSize: '0.7rem' }}>
                <span>Platform:</span>
                <span>{x.platform.toString()}</span>
              </div>
              <div class="code-block" style={{ width: '100%',  display: 'flex', justifyContent: 'space-between', fontSize: '0.7rem' }}>
                <span>Self-Hosted:</span>
                <span>{x.selfHosted.toString()}</span>
              </div>
            </div>
          </div>
        </Link>
      </div>
    ))}
  </div>
</div>

<<<<<<< HEAD
「Authentication」→「Settings」→「External OAuth Providers」と進みます。それぞれに「Client ID」と「Secret」を入力することで、プロバイダーを有効にできます。
=======

### Simple interface

You can enable third-providers with the click of a button by navigating to Authentication > Settings > External OAuth Providers and inputting your `Client ID` and `Secret` for each.
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9

![OAuthログイン](/img/supabase-oauth-logins.png)

<<<<<<< HEAD
## 行単位セキュリティー
=======

## Authorization


When you need granular authorization rules, nothing beats PostgreSQL's Row Level Security (RLS).

Policies are PostgreSQL's rule engine. They are incredibly powerful and flexible, allowing you to write complex SQL rules which fit your unique business needs.

Get started with our [Row Level Security Guides](/docs/guides/auth/row-level-security).


### Row Level Security
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9

認証はそこまでしかできません。緻密な認証ルールが必要な場合、PostgreSQLの[行単位セキュリティー（Row Level Security - RLS）](https://www.postgresql.org/docs/current/ddl-rowsecurity.html)に勝るものはありません。SupabaseではRLSのオン・オフを簡単に設定できます。

<video width="99%" muted playsInline controls="true">
  <source src="/docs/videos/rls-zoom2.mp4" type="video/mp4" muted playsInline />
</video>

<<<<<<< HEAD
## ポリシー
=======
### Policies
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9

[ポリシー](https://www.postgresql.org/docs/current/sql-createpolicy.html)はPostgreSQLのルールエンジンです。非常に強力で柔軟性があり、固有のビジネスニーズに合った複雑なSQLルールを書くことができます。

<video width="99%" muted playsInline controls="true">
  <source src="/docs/videos/policies-zoom2.mp4" type="video/mp4" muted playsInline />
</video>

ポリシーを使えば、データベースがルールエンジンとなります。このように、クエリを繰り返しフィルタリングする必要はなくなります。

```js
const loggedInUserId = 'd0714948'
let { data, error } = await supabase
  .from('users')
  .select('user_id, name')
  .eq('user_id', loggedInUserId)

// console.log(data)
// => { id: 'd0714948', name: 'Jane' }
```

データベースのテーブルに`auth.uid() = user_id`というルールを定義するだけで、ミドルウェアからフィルターを削除しても、リクエストはルールを通過した行を返してくれます。

```js
let user = await supabase.from('users').select('user_id, name')

// console.log(data)
// Still => { id: 'd0714948', name: 'Jane' }
```


<<<<<<< HEAD
## 仕組み
=======
### How It Works
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9

1. ユーザーがサインアップします。Supabaseは、`auth.users`テーブルに新しいユーザーを作成します。
2. Supabaseは、ユーザーの`UUID`を含む新しいJWTを返します。
3. データベースへのすべてのリクエストに、JWTも一緒に送信します。
4. PostgresはJWTを検査して、リクエストを行ったユーザーを特定します。
5. ユーザーのUIDは、行へのアクセスを制限するポリシーで使用できます。

Supabaseは、JWTからユーザーのUIDを抽出するPostgresの特別な関数、`auth.uid()`を提供しています。これは特にポリシーを作成する際に便利です。

<<<<<<< HEAD
## Tips

#### データベースのテーブルのリアルタムを有効化

Realtime Serverは、行単位セキュリティー（RLS）のポリシーに応じて、データベースの変更を許可されたユーザーにブロードキャストします。
パブリケーションに追加するテーブルでは、行単位セキュリティーを有効にして行セキュリティーポリシーを設定することをお勧めします。
ただし、テーブルでRLSを無効にして、接続しているすべてのクライアントに変更をブロードキャストもできます。
=======
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9


## User Management

<<<<<<< HEAD
begin;
  -- リアルタイム・パブリケーションを削除
  drop publication if exists supabase_realtime;

  -- パブリケーションを再作成しますが、どのテーブルに対しても有効にしません
  create publication supabase_realtime;
commit;

-- パブリケーションにテーブルを追加
alter publication supabase_realtime add table products;

-- 他のテーブルをパブリケーションに追加
alter publication supabase_realtime add table posts;
```
=======
Supabase makes it simple to manage your users.

<video width="99%" muted playsInline controls="true">
  <source src="/docs/videos/auth-zoom2.mp4" type="video/mp4" muted playsInline />
</video>

When users sign up, Supabase assigns them a unique ID. You can reference this ID anywhere in your database. For example, you might create a `profiles` table referencing `id` in the `auth.users` table using a `user_id` field.

Supabase provides the routes to [sign up](/docs/reference/javascript/auth-signup), [log in](/docs/reference/javascript/auth-signin),
[log out](/docs/reference/javascript/auth-signout), and manage users in your apps and websites.

>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9

## 次のステップ

<<<<<<< HEAD
- 認証については、[ガイド](/docs/guides/auth/intro)で詳しく解説
- サインイン：[app.supabase.io](https://app.supabase.io)
=======
- Sign in: [app.supabase.io](https://app.supabase.io)
>>>>>>> c7d906b87da150cced005c6efe35f918cbc6edb9
