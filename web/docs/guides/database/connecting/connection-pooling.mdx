---
id: connection-pooling
title: "コネクション・プーリング"
description: Connecting to your Supabase database using PgBouncer.
---

コネクションプールは、多数の_一時的な_接続を管理するのに便利です。

## コネクションプールの仕組み

「コネクションプール」とは、PostgreSQLのネイティブシステムではなく、（PostgreSQLの外部にある）接続を管理するシステムのことです。Supabaseでは、[PgBouncer](https://www.pgbouncer.org/)を使用してコネクションプーリングを行っています。

クライアントがリクエストを行うと、PgBouncerは利用可能な接続をクライアントに「割り当て」ます。クライアントのトランザクションまたはセッションが完了すると、接続はプールに戻され、他のクライアントが自由に使用できるようになります。


![Connection pooling](/img/guides/connection-pool.png)


## プールモード

プールモードは、PgBouncerがどのように接続を処理するかを決定します。

### セッション

新しいクライアントが接続すると、そのクライアントが切断するまで、そのクライアントに接続が割り当てられます。その後、接続はプールに戻されます。

このオプションでは、すべてのPostgreSQLの機能を使用できます。

### トランザクション

これは、サーバーレス機能に推奨されるオプションです。接続は、トランザクションの間だけ、クライアントに割り当てられます。同じクライアントからの連続した2つのトランザクションは、2つの異なる接続で実行できます。

プリペアドステートメントなどのPostgreSQLのセッションベースの機能の一部は、このオプションでは使用できません。

### ステートメント

これは最も詳細なオプションです。接続は全ての文の後、プールに戻されます。複数のステートメントを含むトランザクションは許可されません。このオプションは、`AUTOCOMMIT`を使用している場合に最適です。

## 接続文字列の検索

<Tabs
defaultValue="UI"
values={[
  {label: 'UI', value: 'UI'}
]}>
<TabItem value="UI">

```sh
1. Go to the "Database" section.
2. Click "Connection Pooling".
3. Find your Connection Info and Connection String.
```

<video width="99%" muted playsInline controls="true">
  <source src="/docs/videos/pgbouncer-connection.mp4" type="video/mp4" muted playsInline />
</video>

</TabItem>
</Tabs>



## リソース

- [直接接続](/docs/guides/database/connecting/direct-connections)。
- [コネクションプーリング](/docs/guides/database/connecting/connection-pooling)。
