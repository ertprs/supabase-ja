---
id: http
title: "http：RESTfulクライアント"
description: An HTTP Client for PostgreSQL Functions.
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

`http`拡張機能を使用すると、Postgres内でRESTfulなエンドポイントを呼びだすことができます。

## 概要

いくつかの基本的な概念を説明しましょう。

- REST: REpresentational State Transferの略です。これは単純に、外部サービスにデータを要求する方法です。
- RESTful APIは、HTTPの「呼び出し」を受け付けるサーバーです。呼び出しは通常
  - `GET`- リソースへの読み取り専用アクセス。
  - `POST`- 新しいリソースを作成します。
  - `DELETE`- リソースを削除します。
  - `PUT`- 既存のリソースを更新、または新しいリソースを作成します。

Postgresからこれらのネットワーク要求するために、`http`エクステンションを使用できます。


## 使用方法


### 有効化

<!-- textlint-disable -->

<Tabs
defaultValue="UI"
values={[
  {label: 'UI', value: 'UI'},
  {label: 'SQL', value: 'SQL'},
]}>
<TabItem value="UI">

<!-- textlint-enable -->

```sh
1. Go to the Database page.
2. Click on "Extensions" in the sidebar.
3. Search for "http".
4. Click the toggle.
```



</TabItem>
<TabItem value="SQL">

```sql 

-- Example: enable the "http" extension 
create extension http with schema extensions;

-- Example: disable the "http" extension 
drop extension if exists http;

```

SQLコードが`拡張機能を作成し`ていても、これは「拡張機能を有効にする」ことと同じです。
拡張機能を無効にするには、`drop extension`を呼び出します。

データベースをきれいに保つために、拡張機能を（`extensions`のような）別のスキーマ内に作成することは良い習慣です。

</TabItem>

</Tabs>

### 利用可能な関数

主な使用方法は単純に`http('http_request')`ですが、特定の機能のために5つのラッパー関数があります。

- `http_get()`
- `http_post()`
- `http_put()`
- `http_delete()`
- `http_head()` 

### 返される値

`http`拡張モジュールからWebのURLへの呼び出しに成功すると、以下のフィールドを持つレコードが返されます。

- `ステータス`: 整数
- `content_type`: さまざまな文字
- `headers`: http_header\[]
- `content`: 文字数は可変です。典型的な例としては、`content::jsonb`というフォーマットで`jsonb`にキャストします

## 例

### 単純な`GET の`例

```sql
select 
  "status", "content"::jsonb
from 
  http_get('https://jsonplaceholder.typicode.com/todos/1');
```


### シンプルな`POST`の例

```sql
select 
  "status", "content"::jsonb
from 
  http_post(
    'https://jsonplaceholder.typicode.com/posts',
    '{ "title": "foo", "body": "bar", "userId": 1 }',
    'application/json'
  );
```


## リソース

- [`httpの`](https://github.com/pramsey/pgsql-http)公式[Githubリポジトリ](https://github.com/pramsey/pgsql-http)です。
